var shellPerformance=window.performance,HighResolutionTimingSupported=!!shellPerformance&&"function"==typeof shellPerformance.mark;HighResolutionTimingSupported&&shellPerformance.mark("shell_chat_start"),(self.suiteux_shell_webpackJsonp_main=self.suiteux_shell_webpackJsonp_main||[]).push([["chat"],{85216:function(t,e,n){(e=t.exports=n(93476)(!1)).push([t.id,"._3h4sI7nX01-RHWxPYubeSU{display:inline-block;font-size:19px;vertical-align:middle}",""]),e.locals={icon:"_3h4sI7nX01-RHWxPYubeSU"}},67842:function(t,e,n){(e=t.exports=n(93476)(!1)).push([t.id,"._3621pkmF-lKp4k2Fzdaqy{position:absolute;z-index:1000000;background-color:#fff;width:320px;box-sizing:border-box;outline:none;overflow-y:auto;visibility:visible;pointer-events:auto;box-shadow:0 2px 4px 0 rgba(0,0,0,.22);overflow-y:hidden;min-width:320px;max-width:320px;top:50px;height:450px;outline:0;display:block;visibility:hidden;z-index:1000001;-webkit-transform-origin:top;-ms-transform-origin:top;transform-origin:top;-webkit-animation-duration:.18s;animation-duration:.18s;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-timing-function:ease;animation-timing-function:ease}._3sQksgj9I49rwkKr35v0Z0{-webkit-animation-name:slideInFrames;animation-name:slideInFrames;visibility:visible}@-webkit-keyframes slideInFrames{0%{opacity:0;-webkit-transform:scale(.95);-ms-transform:scale(.95);transform:scale(.95)}to{opacity:1;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}@keyframes slideInFrames{0%{opacity:0;-webkit-transform:scale(.95);-ms-transform:scale(.95);transform:scale(.95)}to{opacity:1;-webkit-transform:scale(1);-ms-transform:scale(1);transform:scale(1)}}.BZqRf1M4uMYyXzdFfjHyN{box-shadow:0 2px 4px 0 rgba(0,0,0,.22);overflow-y:hidden}._8OxoRyxtoXn9ILQI2XSEE{height:450px;width:320px}",""]),e.locals={chatWindowWidth:"320",chatPopup:"_3621pkmF-lKp4k2Fzdaqy",popupSlideIn:"_3sQksgj9I49rwkKr35v0Z0",callout:"BZqRf1M4uMYyXzdFfjHyN",recentsWrapper:"_8OxoRyxtoXn9ILQI2XSEE"}},3352:function(t,e,n){(e=t.exports=n(93476)(!1)).push([t.id,".bMv2Khh1xMvmSgdvstP6F{bottom:0;right:0;padding-right:20px;position:absolute;display:flex;z-index:1000001;align-items:flex-end;max-width:calc(100% - 320px);-webkit-box-align:end}.bMv2Khh1xMvmSgdvstP6F .conversation{display:initial}.bMv2Khh1xMvmSgdvstP6F iframe{margin-right:10px}",""]),e.locals={wrapperStyle:"bMv2Khh1xMvmSgdvstP6F"}},90441:function(t,e,n){var a=n(85216);"string"==typeof a&&(a=[[t.id,a,""]]);n(65122)(a,{});a.locals&&(t.exports=a.locals)},20042:function(t,e,n){var a=n(67842);"string"==typeof a&&(a=[[t.id,a,""]]);n(65122)(a,{});a.locals&&(t.exports=a.locals)},45591:function(t,e,n){var a=n(3352);"string"==typeof a&&(a=[[t.id,a,""]]);n(65122)(a,{});a.locals&&(t.exports=a.locals)},35029:function(t,e,n){"use strict";n.r(e),n.d(e,{ChatHeaderButtonConnector:function(){return J},ChatIconConnector:function(){return $},initializeChatComponent:function(){return Q}});var a,i=n(64731),o=n(25445),s=n(82669),r=n(75358),c=n(59497),l=n(59312),h=n(49447),p=n(85920),d=n(68461),u=n(26244),m=n(90441),C=n(72113),f=n(364),v=n(35420),S=function(t){var e=t instanceof MouseEvent;if(t instanceof KeyboardEvent)switch(t.which){case 40:e=t.altKey;break;case 13:case 32:e=!0}e&&function(t){t.preventDefault(),window.open(a),(0,h.jl)().click("ChatButton","NavBar",null,null,"Default chat web page")}(t)};var I,w=function(t){function e(e){var n=t.call(this,e)||this;return n.onMouseChange=function(t){return n.setState({isHovered:t})},n.state={isHovered:!1},a=n.props.chatWebLink,n}return(0,l.ZT)(e,t),e.prototype.render=function(){if(!this.props.chatEnabled)return null;var t=this.props.isConsumerShell?"SkypeLogo":"OfficeChat",e=(0,d.j)();return i.createElement("button",{type:"button",id:p.vP,className:(0,r.iv)(C.button,e.headerButton),"aria-disabled":"false",title:f.b.Chat,"aria-label":f.b.Chat,role:"button",onMouseEnter:this.onMouseChange.bind(this,!0),onMouseLeave:this.onMouseChange.bind(this,!1)},i.createElement(r.BH,{fontIconCss:"ms-Icon--"+t,fontSize:v.GX.toString(),className:(0,r.iv)(m.icon),isAriaHidden:!0}),i.createElement(r.Eb,{unseenItemCount:this.props.unreadBadgeValue,isParentHovered:this.state.isHovered,badgeStyles:(0,r.iv)(C.headerButtonBadgePosition)}))},e.prototype.componentDidMount=function(){(0,r.yw)([p.vP],u.t.CLICK+" "+u.t.KEYDOWN,S)},e}(i.Component),P=n(60321),y=n(99464),g=n(20042),b=n(4245),E="chat_popup",A=function(t){function e(e){var n=t.call(this,e)||this;return n.populateRecentsContent=function(t){t&&(n.props.isChatRecentsPaneInitialized?(0,P.AQ)(t,n.props.isTeamsChatActivated):n.initializeRecents(t))},n.initializeRecents=function(t){n.props.isChatAPIInitialized?(0,P.e9)(t,n.props.onRecentsReady,n.props.isTeamsChatActivated):(I=function(){window.removeEventListener(y.X_.ChatAPIReady,I),(0,P.e9)(t,n.props.onRecentsReady,n.props.isTeamsChatActivated)},window.addEventListener(y.X_.ChatAPIReady,I))},n.onAnimationEnd=function(){n.chatPopUp&&n.chatPopUp.focus()},n.handleMessage=function(t){var e;if((null===(e=t.data.payload)||void 0===e?void 0:e.eventId)===b.q.KeyPressed){var a=t.data.payload.payload;a.data&&n.handleKeydown(a.data)}},n.handleKeydown=function(t){if(27===t.keyCode)t.stopPropagation&&(t.stopPropagation(),t.preventDefault()),n.props.onDismiss(t),n.chatHeaderButton.focus()},n.state={popupPosition:null},n}return(0,l.ZT)(e,t),e.prototype.calculatePopupPosition=function(){var t,e=parseInt(g.chatWindowWidth),n=this.chatHeaderButton&&this.chatHeaderButton.getBoundingClientRect();if(n&&0!==n.x||(this.chatHeaderButton=document.getElementById(p.vP),n=this.chatHeaderButton&&this.chatHeaderButton.getBoundingClientRect()),n&&n.x>0){var a=n.left+.5*n.width-e/2;t=a+e>this.chatHeaderButton.offsetParent.clientWidth+this.chatHeaderButton.offsetWidth?{right:10}:a<0?{left:10}:{left:a}}else t=this.props.isRtl?{left:10}:{right:10};this.props.isThinHeader&&(t=(0,l.pi)((0,l.pi)({},t),{top:this.props.isThinHeader?48:50})),this.setState({popupPosition:t})},e.prototype.render=function(){var t,e=(0,d.j)();return i.createElement(r.GI,{onDismiss:this.props.onDismiss,ariaLabel:f.b.ChatOpened,role:"region",className:(0,r.iv)(g.chatPopup,(t={},t[g.popupSlideIn]=this.props.isChatRecentsPaneOpen,t)),popupPosition:this.state.popupPosition,id:E,onAnimationEnd:this.onAnimationEnd,isVisible:this.props.isChatRecentsPaneOpen,isPersistant:!0},i.createElement("div",{"data-style":"o365shell",className:(0,r.iv)(y.l$.ChatRecents,g.recentsWrapper,e.neutral.lighterAlt.background),ref:this.populateRecentsContent,id:"chat_recent_pane"}))},e.prototype.componentDidUpdate=function(t){!t.isChatRecentsPaneOpen&&this.props.isChatRecentsPaneOpen&&((0,h.jl)().impression("ChatWindowOpened","Chat"),this.calculatePopupPosition())},e.prototype.componentDidMount=function(){window.addEventListener(r.tw.RESIZE,this.props.onDismiss),window.addEventListener(r.tw.SCROLL,this.props.onDismiss),window.addEventListener(r.tw.MESSAGE,this.handleMessage),this.chatPopUp||(this.chatPopUp=document.getElementById(E),this.chatPopUp.addEventListener(r.tw.KEYDOWN,this.handleKeydown))},e.prototype.componentWillUnmount=function(){window.removeEventListener(r.tw.RESIZE,this.props.onDismiss),window.removeEventListener(r.tw.SCROLL,this.props.onDismiss),window.removeEventListener(r.tw.MESSAGE,this.handleMessage),this.chatPopUp.removeEventListener(r.tw.KEYDOWN,this.handleKeydown)},e}(i.Component),L=n(33237),k=n(24286);function R(t){return{type:k.__,isRecentsOpen:t}}function D(t){return{type:L.q,isRecentsInitialized:t}}var _=(0,s.$j)((function(t){return{isChatAPIInitialized:t.chatState.isChatAPIInitialized,isChatRecentsPaneInitialized:t.chatState.isChatRecentsPaneInitialized,isChatRecentsPaneOpen:t.chatState.isChatRecentsPaneOpen,isThinHeader:(0,h.aH)().isThinHeader,isTeamsChatActivated:t.chatState.isTeamsChatActivated,isRtl:t.userState&&t.userState.isRtl}}),(function(t){return{onRecentsReady:function(){t(D(!0))},onDismiss:function(e){var n=document.getElementById(p.vP);e instanceof MouseEvent&&e.target&&n&&n.contains(e.target)||t(R(!1))}}}))(A),T=n(45591);var x,B,z,M,U,H=function(){var t=(0,v.nV)((0,r.iv)(y.l$.ChatWrapper,T.wrapperStyle),"chat_wrapper_pane");return document.body.appendChild(t),t},j=function(){function t(){}return t.prototype.initialize=function(t){var e=this;return this.props=t,new Promise((function(t,n){x=function(){e.initializeComplete(!0),t()},B=function(){e.initializeComplete(!1),(0,h.jl)().exception("TeamsChat_SilentAuth_Failed",6,null),n()},window.addEventListener(b.q.TeamsChatAPIReady,x),window.addEventListener(b.q.TeamsChatAuthFailed,B),(0,h.jl)().perfMarker("TeamsLoaderInitStarted"),e.appendTeamsChatDownloadScript()}))},t.prototype.initializeComplete=function(t){(0,h.jl)().perfMarker("TeamsLoaderInitComplete"),(0,h.jl)().perfMeasure("TeamsLoaderInitElapsed","TeamsLoaderInitStarted","TeamsLoaderInitComplete"),this.props.onTeamsChatActivated(t),window.removeEventListener(b.q.TeamsChatAPIReady,x),window.removeEventListener(b.q.TeamsChatAuthFailed,B)},t.prototype.create=function(){return(0,l.mG)(this,void 0,void 0,(function(){var t=this;return(0,l.Jh)(this,(function(e){return[2,TeamsClient.SDK.create({chatsParentElement:H(),hostCtx:this.props.workloadId,loginHint:this.props.upn}).then((function(t){return TeamsClient.client=t,TeamsClient.client.notifications.get()})).then((function(e){return e.subscribe((function(e){e.type===b.k.UnreadCounterUpdate&&t.props.onUnreadConversationUpdate(e.data)}))}))]}))}))},t.prototype.appendTeamsChatDownloadScript=function(){var t=document.createElement("script");t.dataset.loginHint=this.props.upn;var e=null;window.URLSearchParams&&(e=new URLSearchParams(window.location.search)),t.src=e&&e.has("teams-embed-sdk-url")?e.get("teams-embed-sdk-url"):"https://teams.microsoft.com/embed-client/loader.js",document.body.appendChild(t)},t}(),K=n(27489),O=document.getElementById(p.en),W=function(){function t(){var t=this;this.onPresenceStatusChanged=function(e){var n=t.props.presenceStatus,a=(0,K.ZZ)(e,t.props.userPresenceStatusItems);(0,P.W3)(a,(function(){(0,h.jl)().exception("Chat_SetPresenceStatus_Failed",6,null),t.props.userPresenceStatusUpdate(n)}))},this.myPresenceStatusUpdate=function(e){if(t.props.userPresenceStatusItems){var n=(0,K.ZZ)(e,t.props.userPresenceStatusItems);t.props.userPresenceStatusUpdate(n)}t.presenceStatusKey=e},this.onStartChat=function(){t.props.onRecentsOpen(!1,p.vP),(0,h.jl)().impression("ChatWindowOpened","Chat")}}return t.prototype.initialize=function(t){var e=this;return this.props=t,new Promise((function(t,n){z=function(){var t=e.getInitParams();window.removeEventListener(y.X_.ChatCoreReady,z),swc.init(null,t).catch((function(t){window.removeEventListener(y.X_.ChatAPIReady,M),n(t)}))},M=function(){t()},window.addEventListener(y.X_.ChatCoreReady,z),window.addEventListener(y.X_.ChatAPIReady,M),e.appendChatAPIDownloadScript()}))},t.prototype.create=function(){return(0,l.mG)(this,void 0,void 0,(function(){var t=this;return(0,l.Jh)(this,(function(e){return window.removeEventListener(y.X_.ChatAPIReady,M),this.registerSwcChatEvents(),[2,swc.create(y.PO.Messaging,P.o0,H()).then((function(){return swc.getPresence()})).then((function(e){return e.subscribeToMyStatus(t.myPresenceStatusUpdate),e.getStatusList()})).then((function(e){(0,K.xq)(e)&&(t.props.onUserPresenceStatusListUpdate(e),t.presenceStatusKey?(t.myPresenceStatusUpdate(t.presenceStatusKey),t.presenceStatusKey=void 0):(0,h.jl)().tag("Presence_API_getStatusList_Invalid",6))})).catch((function(t){(0,h.jl)().exception("Presence_API_getStatusList_Failed",6,t)})).then((function(){return(0,l.mG)(t,void 0,void 0,(function(){var t=this;return(0,l.Jh)(this,(function(e){switch(e.label){case 0:return swc.getKeyboard?[4,swc.getKeyboard().then((function(e){e.onKeyDown((function(e){"Escape"===e.key&&t.props.isChatRecentsPaneOpen&&t.dismissChatRecentsPane()}))})).catch((function(t){(0,h.jl)().exception("get_keyboard_API_Failed",6,t)}))]:[3,2];case 1:e.sent(),e.label=2;case 2:return(0,h.Lo)().subscribe("PresenceStatusChanged",this.onPresenceStatusChanged,!1),[2]}}))}))}))]}))}))},t.prototype.getInitParams=function(){return{toLoadUnreadConversationsCount:!0,locale:this.props.locale,correlationId:this.props.correlationId,loginHint:this.props.upn}},t.prototype.dismissChatRecentsPane=function(){this.props.onRecentsOpen(!1,p.vP);var t=document.getElementById(p.vP);t&&t.focus()},t.prototype.appendChatAPIDownloadScript=function(){var t=this;U=function(){t.onChatAPIDownloadScriptFailed()};var e=document.createElement("script");e.type="text/javascript",e.setAttribute("data-style","o365shell"),e.setAttribute("data-disable-autostart","true"),e.setAttribute("data-platform-id",this.props.workloadId),e.setAttribute("data-auth-type",this.props.isConsumerShell?"msa":"aad"),e.src=this.props.chatSDKUrl,e.onerror=U,document.head.appendChild(e)},t.prototype.onChatAPIDownloadScriptFailed=function(){(0,h.jl)().exception("Chat API download script failed",6,null),this.props.onChatAPIInitialized(!1),this.props.responsiveEnabled||this.props.isConsumerShell&&(O.style.display="block")},t.prototype.registerSwcChatEvents=function(){swc.API.registerEvent(y.X_.ApiUnreadConversationUpdate,this.props.onUnreadConversationUpdate),swc.API.registerEvent(y.X_.ApiStartChat,this.onStartChat),swc.API.registerEvent(y.X_.ApiOnCallStart,(function(){(0,h.jl)().impression("CallStart","Chat")})),swc.API.registerEvent(y.X_.ApiOnRecentItemSelected,(function(){(0,h.jl)().click("ChatRecentItem","Chat")})),swc.API.registerEvent(y.X_.ApiRecentsShown,this.startChatLoadingTime),swc.API.registerEvent(y.X_.ApiRecentItemsLoaded,this.logChatLoadingTime)},t.prototype.startChatLoadingTime=function(){this.chatLoadingStartTime=Date.now()},t.prototype.logChatLoadingTime=function(){this.chatLoadingStartTime&&((0,h.jl)().timer("Chat_FirstTimeChatListShown",Date.now()-this.chatLoadingStartTime),swc.API.unregisterEvent(y.X_.ApiRecentItemsLoaded,this.logChatLoadingTime),swc.API.unregisterEvent(y.X_.ApiRecentsShown,this.startChatLoadingTime))},t}(),F=document.getElementById(p.en),X=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onChatClickHandler=function(t){var n=t instanceof MouseEvent;if(t instanceof KeyboardEvent)switch(t.which){case 40:n=t.altKey;break;case 13:case 32:t.preventDefault(),n=!0}n&&e.chatClicked(t)},e}return(0,l.ZT)(e,t),e.prototype.render=function(){return this.props.chatEnabled&&this.props.isChatAPIInitialized?i.createElement(_,null):null},e.prototype.componentDidMount=function(){e.chatLoading||!this.props.chatEnabled||this.props.isChatAPIInitialized||this.loadChatControl()},e.prototype.componentDidUpdate=function(){e.chatLoading||!this.props.chatEnabled||this.props.isChatAPIInitialized||this.loadChatControl()},e.prototype.loadChatControl=function(){var t=this;e.chatLoading=!0,(0,h.jl)().perfMarker("ChatTimeToLoadStart"),this.chatControl=this.props.isConsumerShell?new W:new j,this.chatControl.initialize(this.props).then((function(){return t.chatControl.create()})).then((function(){return t.onChatControlCreated(!0)})).catch((function(e){return t.handleAPIInitializationError(e)})).then((function(){(0,h.jl)().perfMarker("ChatTimeToLoadEnd"),(0,h.jl)().perfMeasure("ChatTimeToLoad","ChatTimeToLoadStart","ChatTimeToLoadEnd"),(0,h.jl)().impression("Chat_Button","Chat")}))},e.prototype.handleAPIInitializationError=function(t){(0,h.jl)().exception("Chat_API_Initialization_Failed",6,t),e.chatLoading=!1,this.onChatControlCreated(!1)},e.prototype.onChatControlCreated=function(t){if(this.props.onChatAPIInitialized(t),t&&!this.props.responsiveEnabled){var n=document.getElementById(p.vP);n&&((0,r.nJ)(n,r.tw.CLICK+" "+r.tw.KEYDOWN,S),(0,r.yw)(n,r.tw.CLICK+" "+r.tw.KEYDOWN,this.onChatClickHandler),F.style.display="block")}e.chatLoading=!1},e.prototype.chatClicked=function(t){t.preventDefault(),(0,h.jl)().click("ChatButton","NavBar",null,null,"Chat recents list open "+!this.props.isChatRecentsPaneOpen),this.props.onRecentsOpen(!this.props.isChatRecentsPaneOpen,p.vP)},e.chatLoading=!1,e}(i.Component),N=(0,s.$j)((function(t){var e=t.shellInitDataState;return{disableToasts:e.renderSettings.disableToasts,locale:t.shellInitDataState.navBarData.CultureName,isConsumerShell:t.shellInitDataState.clientData.IsConsumerShell,correlationId:t.shellInitDataState.clientData.SHSID,responsiveEnabled:null!=t.shellInitDataState.layout,chatEnabled:t.chatState.chatEnabled,chatSDKUrl:t.chatState.webChatSDKUrl,isChatAPIInitialized:t.chatState.isChatAPIInitialized,isChatRecentsPaneOpen:t.chatState.isChatRecentsPaneOpen,isTeamsChatActivated:t.chatState.isTeamsChatActivated,workloadId:e.clientData.WorkloadId,presenceStatus:t.meControlState.userPresenceStatus,userPresenceStatusItems:t.meControlState.userPresenceStatusItems,upn:t.userState&&t.userState.upn}}),(function(t){return{onChatAPIInitialized:function(e){var n;t((n=e,{type:L.D,isChatAPIInitialized:n}))},onRecentsOpen:function(e,n){t(R(e)),t((0,r.uS)(n))},onUnreadConversationUpdate:function(e){var n;"number"==typeof e&&t((n=e,{type:L.nZ,unreadBadgeValue:n}))},userPresenceStatusUpdate:function(e){t((0,c.F0)(e))},onUserPresenceStatusListUpdate:function(e){t((0,c.Cb)(e))},onTeamsChatActivated:function(e){t(function(t){return{type:L.YI,isTeamsChatActivated:t}}(e))}}}))(X),Z=n(87691),q=n(32035),Y=n(74524),G=n(98271),V=function(t){function e(e){var n=t.call(this,e)||this;return n.chatEnablementPromise=null,n.state={isHovered:!1,delayRender:!!e.shouldEnableChat},n}return(0,l.ZT)(e,t),e.prototype.componentDidMount=function(){return(0,l.mG)(this,void 0,void 0,(function(){var t,e;return(0,l.Jh)(this,(function(n){switch(n.label){case 0:if(!this.state.delayRender)return[3,4];this.chatEnablementPromise=(0,G.W)(this.props.shouldEnableChat),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.chatEnablementPromise.promise];case 2:return t=n.sent(),this.setState({delayRender:!t}),[3,4];case 3:return(e=n.sent())&&!e.isCancelled&&(0,h.jl)().exception("Chat_Delay_Initialization_Failed",6,e),[3,4];case 4:return this.props.isAvailable&&(0,h.jl)().perfMarker("ChatTimeToInteractive"),[2]}}))}))},e.prototype.componentWillUnmount=function(){var t;null===(t=this.chatEnablementPromise)||void 0===t||t.cancel()},e.prototype.getAriaLabel=function(){var t=f.b.Chat;return void 0!==this.props.unseenItemCount&&0!==this.props.unseenItemCount?(0,r.Uw)(f.b.ChatUnreadItems,""+this.props.unseenItemCount):t},e.prototype.render=function(){var t=this;if(!this.props.chatEnabled||this.state.delayRender)return null;var e={controlID:this.props.id,isVisible:this.props.isAvailable,ariaLabel:this.getAriaLabel(),affordanceMenuItemText:f.b.Chat,iconID:this.props.isConsumerShell?"SkypeLogo":"OfficeChat",iconFontSize:v.GX.toString(),isActive:this.props.isActive,isDarkModeEnabled:this.props.isDarkModeEnabled,onClick:this.props.onClick,onHoverStateChanged:function(e){t.setState({isHovered:e})},onDimensionsChanged:this.props.controlDimensionsChanged};return 0===this.props.renderContext?i.createElement(q.sO,(0,l.pi)({},e),i.createElement(r.Eb,{unseenItemCount:this.props.unseenItemCount,isParentHovered:this.state.isHovered,badgeStyles:C.headerButtonBadgePosition})):i.createElement(q.b,(0,l.pi)({},e),i.createElement(r.Eb,{unseenItemCount:this.props.unseenItemCount,isParentHovered:this.state.isHovered,badgeStyles:Y.affordanceContextMenuItemBadgePosition}))},e}(i.Component);var J=(0,s.$j)((function(t,e){var n,a,i=function(t){var e=!1,n=!1;t.chatState.chatEnabled&&null!==t.chatState.isChatAPIInitialized&&(t.chatState.isChatAPIInitialized?e=!0:t.userState.isConsumer&&(e=!0,n=!0));return{showButton:e,useButtonAsLink:n}}(t);return{isAvailable:i.showButton,id:e&&e.id,isActive:null!==(n=t.chatState&&t.chatState.isChatRecentsPaneOpen)&&void 0!==n&&n,useButtonAsLink:i.useButtonAsLink,chatWebLink:t.chatState&&t.chatState.chatWebLink,chatEnabled:t.chatState&&t.chatState.chatEnabled,isConsumerShell:null===(a=t.shellInitDataState.clientData)||void 0===a?void 0:a.IsConsumerShell,controlDimensionsChanged:e.controlDimensionsChanged,isChatRecentsPaneInitialized:t.chatState.isChatRecentsPaneInitialized,unseenItemCount:t.chatState.unreadBadgeValue,shouldEnableChat:t.shellInitDataState.renderSettings.shouldEnableChat}}),(function(t){return{onClick:function(e,n){e.stopPropagation(),(0,h.jl)().click("ChatButton","NavBar",null,null,"Active state: "+n.isActive+", Render context: "+n.renderContext+", Use Button as Link: "+n.useButtonAsLink),n.onClick&&n.onClick(e),n.useButtonAsLink?(e.preventDefault(),window.open(n.chatWebLink)):(n.isChatRecentsPaneInitialized||(0,P.UN)((function(){t(D(!0))}),(function(e,n){t(R(e)),t((0,r.uS)(n))})),t(R(!n.isActive)),t((0,r.uS)(e.currentTarget&&e.currentTarget.id)))}}}),(function(t,e,n){var a=(0,l.pi)((0,l.pi)({},n),t);return(0,l.pi)((0,l.pi)((0,l.pi)({},a),e),{onClick:function(t){return e.onClick(t,a)},onDimensionsChanged:function(){return e.onDimensionsChanged(a)}})}))(V),$=(0,s.$j)((function(t){return{unreadBadgeValue:t.chatState.unreadBadgeValue,chatEnabled:t.chatState.chatEnabled,chatWebLink:t.chatState.chatWebLink,isConsumerShell:t.shellInitDataState&&t.shellInitDataState.clientData.IsConsumerShell}}))(w);function Q(){var t=document.createElement("div");document.getElementById((0,h.aH)().top).appendChild(t);var e=(0,Z.e)();o.render(i.createElement(s.zt,{store:e},i.createElement(N,null)),t)}}}]),HighResolutionTimingSupported&&(shellPerformance.mark("shell_chat_end"),shellPerformance.measure("shell_chat","shell_chat_start","shell_chat_end"));